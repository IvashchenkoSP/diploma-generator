<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–ø–ª–æ–º–æ–≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: Arial, sans-serif; }
        .card { box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); margin-bottom: 1rem; border: none; }
        .card-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; }
        .btn-success { background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%); border: none; }
        .btn-warning { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border: none; color: white; }
        .template-item { border-left: 4px solid #667eea; padding-left: 10px; margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="text-center mb-4">
            <h1>üéì –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–ø–ª–æ–º–æ–≤</h1>
            <p class="lead">–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–ø–ª–æ–º–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤</p>
        </div>
        
        <!-- –°—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è -->
        <div th:if="${message}" class="alert alert-info alert-dismissible fade show">
            <span th:text="${message}"></span>
            <span th:if="${pdfWorks}" class="badge bg-success ms-2">PDF OK</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        
        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show">
            <span th:text="${error}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞ -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìÅ 1. –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–∞ PDF</h5>
            </div>
            <div class="card-body">
                <form th:action="@{/upload-template}" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ PDF —à–∞–±–ª–æ–Ω:</label>
                        <input type="file" class="form-control" name="templateFile" accept=".pdf" required>
                        <div class="form-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —Ñ–∞–π–ª —Å —à–∞–±–ª–æ–Ω–æ–º –¥–∏–ø–ª–æ–º–∞. –§–ò–û –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–≤–µ—Ä—Ö —à–∞–±–ª–æ–Ω–∞.</div>
                    </div>
                    <button type="submit" class="btn btn-primary">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                </form>
            </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ -->
        <div th:if="${hasTemplates}" class="card">
            <div class="card-header">
                <h5 class="mb-0">üìã –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</h5>
            </div>
            <div class="card-body">
                <div class="template-list">
                    <div th:each="templateName, stat : ${templateNames}" class="template-item">
                        <strong th:text="${templateName}"></strong>
                        <small class="text-muted d-block" th:text="${templates[stat.index]}"></small>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –¥–∏–ø–ª–æ–º–∞ -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìÑ 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –¥–∏–ø–ª–æ–º–∞</h5>
            </div>
            <div class="card-body">
                <form th:action="@{/generate-single}" method="post" target="_blank">
                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label class="form-label">–§–ò–û:</label>
                            <input type="text" class="form-control" name="fullName" 
                                   placeholder="Ivan Ivanov, Peter Petrov, Anna Sidorova" 
                                   value="Ivan Ivanov" required>
                            <div class="form-text">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</div>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">–ü–æ–∑–∏—Ü–∏—è X:</label>
                            <input type="number" class="form-control" name="posX" 
                                   th:value="${defaultX}" min="0" max="1000">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">–ü–æ–∑–∏—Ü–∏—è Y:</label>
                            <input type="number" class="form-control" name="posY" 
                                   th:value="${defaultY}" min="0" max="1000">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</label>
                            <input type="number" class="form-control" name="fontSize" 
                                   th:value="${defaultFontSize}" min="8" max="72" step="0.5">
                        </div>
                    </div>
                    
                    <!-- –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ -->
                    <div th:if="${hasTemplates}" class="mb-3">
                        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω:</label>
                        <select class="form-select" name="templatePath">
                            <option value="">-- –ë–µ–∑ —à–∞–±–ª–æ–Ω–∞ (–ø—Ä–æ—Å—Ç–æ–π –¥–∏–ø–ª–æ–º) --</option>
                            <option th:each="template, stat : ${templates}" 
                                    th:value="${template}" 
                                    th:text="${templateNames[stat.index]}"></option>
                        </select>
                        <div class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–∏–ø–ª–æ–º–∞</div>
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        üéì –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å –¥–∏–ø–ª–æ–º
                    </button>
                </form>
            </div>
        </div>

        <!-- –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–ø–ª–æ–º–æ–≤ -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üì¶ 3. –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–ø–ª–æ–º–æ–≤</h5>
            </div>
            <div class="card-body">
                <form th:action="@{/generate-multiple}" method="post" target="_blank">
                    <div class="row g-3 mb-3">
                        <div class="col-md-2">
                            <label class="form-label">–ü–æ–∑–∏—Ü–∏—è X:</label>
                            <input type="number" class="form-control" name="posX" 
                                   th:value="${defaultX}" min="0" max="1000">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">–ü–æ–∑–∏—Ü–∏—è Y:</label>
                            <input type="number" class="form-control" name="posY" 
                                   th:value="${defaultY}" min="0" max="1000">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</label>
                            <input type="number" class="form-control" name="fontSize" 
                                   th:value="${defaultFontSize}" min="8" max="72" step="0.5">
                        </div>
                    </div>
                    
                    <!-- –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
                    <div th:if="${hasTemplates}" class="mb-3">
                        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω:</label>
                        <select class="form-select" name="templatePath">
                            <option value="">-- –ë–µ–∑ —à–∞–±–ª–æ–Ω–∞ (–ø—Ä–æ—Å—Ç–æ–π –¥–∏–ø–ª–æ–º) --</option>
                            <option th:each="template, stat : ${templates}" 
                                    th:value="${template}" 
                                    th:text="${templateNames[stat.index]}"></option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">–°–ø–∏—Å–æ–∫ –§–ò–û (–∫–∞–∂–¥–æ–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏):</label>
                        <textarea class="form-control" name="names" rows="5" 
                                  placeholder="Ivan Ivanov&#10;Peter Petrov&#10;Anna Sidorova&#10;Maria Volkova">Ivan Ivanov
Peter Petrov
Anna Sidorova
Maria Volkova</textarea>
                        <div class="form-text">–í–≤–µ–¥–∏—Ç–µ –∫–∞–∂–¥–æ–µ –§–ò–û –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã.</div>
                    </div>
                    
                    <button type="submit" class="btn btn-warning">
                        üì¶ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å ZIP –∞—Ä—Ö–∏–≤
                    </button>
                </form>
            </div>
        </div>

        <!-- –ü–æ–º–æ—â—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üí° –ü–æ–º–æ—â—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ A4):</h6>
                        <ul class="list-unstyled">
                            <li>‚Ä¢ <strong>–í–µ—Ä—Ö:</strong> X=100, Y=700</li>
                            <li>‚Ä¢ <strong>–¶–µ–Ω—Ç—Ä:</strong> X=100, Y=400</li>
                            <li>‚Ä¢ <strong>–ù–∏–∑:</strong> X=100, Y=100</li>
                            <li>‚Ä¢ <strong>–ù–∞—á–∞–ª—å–Ω—ã–µ:</strong> X=100, Y=500</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–º–µ–Ω–∞:</h6>
                        <ul class="list-unstyled">
                            <li>‚Ä¢ Ivan Ivanov</li>
                            <li>‚Ä¢ Peter Petrov</li>
                            <li>‚Ä¢ Anna Sidorova</li>
                            <li>‚Ä¢ Maria Volkova</li>
                            <li>‚Ä¢ Alexey Smirnov</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-info mt-3">
                    <strong>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã:</strong><br>
                    1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —à–∞–±–ª–æ–Ω –¥–∏–ø–ª–æ–º–∞<br>
                    2. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏<br>
                    3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –§–ò–û –Ω–∞ –≤–∞—à–µ–º —à–∞–±–ª–æ–Ω–µ<br>
                    4. –§–ò–û –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–≤–µ—Ä—Ö —à–∞–±–ª–æ–Ω–∞
                </div>
                
                <div class="mt-3">
                    <a href="/test-pdf" class="btn btn-outline-secondary btn-sm me-2" target="_blank">
                        –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF
                    </a>
                    <a href="/test-download" class="btn btn-outline-primary btn-sm" target="_blank">
                        –¢–µ—Å—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        console.log('–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–ø–ª–æ–º–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω');
        
        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
        document.addEventListener('DOMContentLoaded', function() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function() {
                    const button = this.querySelector('button[type="submit"]');
                    const originalText = button.innerHTML;
                    button.innerHTML = '‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...';
                    button.disabled = true;
                    
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.disabled = false;
                    }, 5000);
                });
            });
        });
    </script>
</body>
</html>

<!-- –î–æ–±–∞–≤–ª—è–µ–º —ç—Ç—É –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–æ–Ω–µ—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º </div> -->
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">üéØ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞</h5>
            </div>
            <div class="card-body text-center">
                <p>–•–æ—Ç–∏—Ç–µ —Ç–æ—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ?</p>
                <a href="/preview" class="btn btn-outline-primary">
                    üìê –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
                </a>
                <div class="mt-2">
                    <small class="text-muted">–í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å —Å–µ—Ç–∫–æ–π –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</small>
                </div>
            </div>
        </div>
    </div>

    <!-- –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
